---
import type { Lang } from '../../i18n/ui';
import { useTranslations, getLocalizedPath } from '../../i18n/utils';
import type { Book } from '../../i18n/books';
import { getLocalizedBookPath } from '../../i18n/books';

interface Props {
  book: Book;
  lang: Lang;
}

const { book, lang } = Astro.props;
const t = useTranslations(lang);
const bookPath = getLocalizedPath(lang, getLocalizedBookPath(book, lang));
const base = import.meta.env.BASE_URL.replace(/\/$/, '');
---

<a
  href={bookPath}
  class="group block bg-night-800/50 rounded-2xl overflow-hidden border border-night-700/30 hover:border-gold-500/30 transition-all hover:shadow-lg hover:shadow-gold-500/5 hover:-translate-y-1"
>
  <div class={`aspect-[3/4] bg-gradient-to-b ${book.color} flex items-center justify-center p-6`}>
    <img
      src={`${base}${book.coverPlaceholder}`}
      alt={book.title[lang]}
      class="w-full h-full object-contain drop-shadow-lg"
      loading="lazy"
    />
  </div>
  <div class="p-5">
    <span class="text-gold-500 text-xs font-bold uppercase tracking-wider">
      {t('series.mission')} {book.mission}
    </span>
    <h3 class="font-title text-lg font-bold text-white mt-1 group-hover:text-gold-400 transition-colors leading-snug">
      {book.title[lang]}
    </h3>
    <p class="text-night-300 text-sm mt-2">
      {book.theme[lang]}
    </p>
  </div>
</a>
